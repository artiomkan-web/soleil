"use strict";window.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".products"),t=e.querySelectorAll(".products__item"),c=e.querySelectorAll(".products__delete"),l=e.querySelector(".products__list");function n(){let t=0;e.querySelectorAll(".price__actual").forEach(e=>{t+=1*e.textContent.replace(/[^0-9]/g,"")}),t+="",t=r(t),document.querySelector(".cart__result > span").textContent=t}function r(e){if(4==(e+="").length){let t=e.slice(0,1),c=e.slice(-3);e=t+"."+c}else if(5==e.length){let t=e.slice(0,-3),c=e.slice(-3);e=t+"."+c}else if(6==e.length){let t=e.slice(0,-3),c=e.slice(-3);e=t+"."+c}else if(7==e.length){let t=e.slice(0,1),c=e.slice(1,-3),l=e.slice(-3);e=t+"."+c+"."+l}return e}function i(){window.matchMedia("(max-width: 1440px)").matches,window.matchMedia("(max-width: 1024px)").matches,window.matchMedia("(max-width: 768px)").matches,window.matchMedia("(max-width: 360px)").matches}c.forEach(e=>{e.addEventListener("click",()=>{for(let l=0;l<c.length;l++)c[l]==e&&t[l].remove()})}),t.forEach(e=>{let t=e.querySelector(".price__actual"),c=e.querySelector(".price__old"),i=1*t.textContent.replace(/[^0-9]/g,""),o=1*c.textContent.replace(/[^0-9]/g,""),a=e.querySelector(".products__count .count__value");e.addEventListener("click",()=>{t.textContent=r(a.value*i)+" руб.",c.textContent=r(a.value*o)+" руб.",n(),l.textContent.replace(/\s{2,}/g,"").length<1&&(l.innerHTML="<h5>Корзина пуста</h5>")})}),n(),i(),window.addEventListener("resize",i)});